% ПІБ: <ВПИШІТЬ СВОЄ ПІБ ПОВНІСТЮ>

:- encoding(utf8).

% 1) Оператори "грає_в" і "та"
:- op(300, xfy, грає_в).
:- op(200, xfy, та).

% 2) Оператори "працює", "в", "нашому"
:- op(600, xfy, працює).
:- op(500, xfy, в).
:- op(450,  fx, нашому).

% 3) Власний варіант: оператор "або"
:- op(250, xfy, або).

% 4) містить/2: перевіряє, чи є елемент X у термі-ланцюжку через "та"
містить(X, X).
містить(X, A та B) :-
    містить(X, A)
 ;  містить(X, B).

/** <examples>

?- містить(теніс, теніс та баскетбол).
true.

?- містить(волейбол, теніс та баскетбол).
false.

?- write_canonical((теніс та баскетбол та волейбол)), nl.
та(теніс,та(баскетбол,волейбол))
true.

*/

% 5) грає_в/2: факти + розширення для зручних запитів
% clause((Head), true) бере тільки факти (клаузи без тіла)
джиммі грає_в футбол та сквош.
сьюзан грає_в теніс та баскетбол.
василь грає_в теніс та баскетбол та волейбол.

% Запит "грає_в теніс" працює навіть якщо у факті "теніс та ..."
Person грає_в Sport :-
    atomic(Sport),
    clause((Person грає_в SportsTree), true),
    містить(Sport, SportsTree).

% "або" як альтернатива в запитах; nonvar/1 — щоб не було зациклення
Person грає_в (A або B) :-
    nonvar(A),
    nonvar(B),
    (   Person грає_в A
    ;   Person грає_в B
    ).

/** <examples>

?- джиммі грає_в футбол та сквош.
true.

?- сьюзан грає_в теніс та баскетбол.
true.

?- Хто грає_в теніс та баскетбол та волейбол.
Хто = василь.

?- василь грає_в теніс.
true.

?- Хто грає_в (футбол або теніс).
Хто = джиммі ;
Хто = сьюзан ;
Хто = василь.

% Як SWI-Prolog бачить терм без "операторного цукру":
?- write_canonical((сьюзан грає_в теніс та баскетбол та волейбол)), nl.
грає_в(сьюзан,та(теніс,та(баскетбол,волейбол)))
true.

*/

% 6) працює/2: факт про роботу
діана працює секретарем в нашому відділі.

/** <examples>

?- Хто працює секретарем в нашому відділі.
Хто = діана.

?- діана працює Ким.
Ким = секретарем в нашому відділі.

*/
